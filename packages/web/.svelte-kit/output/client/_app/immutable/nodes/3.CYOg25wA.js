import{i as Cn,w as Ge,x as Ze,y as Ke,c as $t,a as U,d as Un,t as X,z as Xe,e as Je,s as vt,g as tr}from"../chunks/DqkJwZYL.js";import{h as Ut,a as un,aK as nr,aN as er,aO as rr,b as Wn,p as ir,c as Qn,d as an,U as ur,aj as ar,aq as lr,ao as or,P as sr,ab as cr,aE as hr,I as vn,E as fr,aP as mr,aQ as pr,l as gr,u as xr,aR as dr,a4 as br,q as kr,au as kt,ad as zn,ae as En,af as wr,aS as yr,aT as Sr,f as Pt,e as Ot,i as N,s as V,r as B,t as Ct,j as P,a9 as Kt,G as Ft,g as Mt,w as _r,k as It,n as Yn,av as Ir}from"../chunks/DXlRHvn5.js";import{l as Cr,s as vr,p as Gn,i as Et}from"../chunks/BdB0C_9E.js";import{I as zr,b as Er,e as mn,c as Fn,r as Zn,i as Kn,u as jt,d as Fr,a as Wt}from"../chunks/BQ3ExOcy.js";import{p as Xn}from"../chunks/AMBKYCc2.js";import{C as tn}from"../chunks/VEMHwJZr.js";import{b as Jn,u as Qt,z as $,S as Ar,X as An,s as te}from"../chunks/CNYwChdC.js";import{b as pn}from"../chunks/B8F-VQ4P.js";import"../chunks/9xNfiEXT.js";function Tr(t,e,n){Ut&&un();var r=t,u=ur,a,i=nr()?er:rr;Wn(()=>{i(u,u=e())&&(a&&ir(a),a=Qn(()=>n(r)))}),Ut&&(r=an)}function Dr(t,e,n,r,u){var a=t,i="",l;Wn(()=>{if(i===(i=e()??"")){Ut&&un();return}l!==void 0&&(hr(l),l=void 0),i!==""&&(l=Qn(()=>{if(Ut){an.data;for(var c=un(),s=c;c!==null&&(c.nodeType!==8||c.data!=="");)s=c,c=ar(c);if(c===null)throw lr(),or;Cn(an,s),a=sr(c);return}var f=i+"",o=Ge(f);Cn(cr(o),o.lastChild),a.before(o)}))})}const Lr=()=>performance.now(),xt={tick:t=>requestAnimationFrame(t),now:()=>Lr(),tasks:new Set};function ne(){const t=xt.now();xt.tasks.forEach(e=>{e.c(t)||(xt.tasks.delete(e),e.f())}),xt.tasks.size!==0&&xt.tick(ne)}function Pr(t){let e;return xt.tasks.size===0&&xt.tick(ne),{promise:new Promise(n=>{xt.tasks.add(e={c:t,f:n})}),abort(){xt.tasks.delete(e)}}}function Nt(t,e){Ke(()=>{t.dispatchEvent(new CustomEvent(e))})}function Or(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Tn(t){const e={},n=t.split(";");for(const r of n){const[u,a]=r.split(":");if(!u||a===void 0)break;const i=Or(u.trim());e[i]=a.trim()}return e}const Mr=t=>t;function Yt(t,e,n,r){var u=(t&yr)!==0,a=(t&Sr)!==0,i=u&&a,l=(t&dr)!==0,c=i?"both":u?"in":"out",s,f=e.inert,o=e.style.overflow,g,h;function x(){var w=wr,D=vn;zn(null),En(null);try{return s??(s=n()(e,(r==null?void 0:r())??{},{direction:c}))}finally{zn(w),En(D)}}var S={is_global:l,in(){var w;if(e.inert=f,!u){h==null||h.abort(),(w=h==null?void 0:h.reset)==null||w.call(h);return}a||g==null||g.abort(),Nt(e,"introstart"),g=ln(e,x(),h,1,()=>{Nt(e,"introend"),g==null||g.abort(),g=s=void 0,e.style.overflow=o})},out(w){if(!a){w==null||w(),s=void 0;return}e.inert=!0,Nt(e,"outrostart"),h=ln(e,x(),g,0,()=>{Nt(e,"outroend"),w==null||w()})},stop:()=>{g==null||g.abort(),h==null||h.abort()}},v=vn;if((v.transitions??(v.transitions=[])).push(S),u&&Ze){var k=l;if(!k){for(var y=v.parent;y&&(y.f&fr)!==0;)for(;(y=y.parent)&&(y.f&mr)===0;);k=!y||(y.f&pr)!==0}k&&gr(()=>{xr(()=>S.in())})}}function ln(t,e,n,r,u){var a=r===1;if(br(e)){var i,l=!1;return kr(()=>{if(!l){var v=e({direction:a?"in":"out"});i=ln(t,v,n,r,u)}}),{abort:()=>{l=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(n==null||n.deactivate(),!(e!=null&&e.duration))return u(),{abort:kt,deactivate:kt,reset:kt,t:()=>r};const{delay:c=0,css:s,tick:f,easing:o=Mr}=e;var g=[];if(a&&n===void 0&&(f&&f(0,1),s)){var h=Tn(s(0,1));g.push(h,h)}var x=()=>1-r,S=t.animate(g,{duration:c});return S.onfinish=()=>{var v=(n==null?void 0:n.t())??1-r;n==null||n.abort();var k=r-v,y=e.duration*Math.abs(k),w=[];if(y>0){var D=!1;if(s)for(var z=Math.ceil(y/16.666666666666668),b=0;b<=z;b+=1){var A=v+k*o(b/z),T=Tn(s(A,1-A));w.push(T),D||(D=T.overflow==="hidden")}D&&(t.style.overflow="hidden"),x=()=>{var O=S.currentTime;return v+k*o(O/y)},f&&Pr(()=>{if(S.playState!=="running")return!1;var O=x();return f(O,1-O),!0})}S=t.animate(w,{duration:y,fill:"forwards"}),S.onfinish=()=>{x=()=>r,f==null||f(r,1-r),u()}},{abort:()=>{S&&(S.cancel(),S.effect=null,S.onfinish=kt)},deactivate:()=>{u=kt},reset:()=>{r===0&&(f==null||f(1,0))},t:()=>x()}}function Br(t,e){const n=Cr(e,["children","$$slots","$$events","$$legacy"]);zr(t,vr({name:"copy"},()=>n,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(u,a)=>{var i=$t(),l=Pt(i);Er(l,e,"default",{}),U(u,i)},$$slots:{default:!0}}))}function Rr(t,e){t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),e())}var Nr=X('<div class="bg-white rounded-lg shadow p-2 md:p-4"><div class="flex flex-col"><textarea placeholder="Type your message here..." class="w-full resize-none overflow-scroll focus:outline-none min-h-[60px] max-h-[200px]" rows="1"></textarea> <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mt-2 gap-2 sm:gap-0"><div class="text-xs text-gray-500 order-2 self-end sm:order-1 w-full sm:w-auto hidden md:block">Press Enter to send, Shift+Enter for new line</div> <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed order-1 sm:order-2 w-full sm:w-auto"> </button></div></div></div>');function qr(t,e){Ot(e,!0);const n=Gn(e,"locked",3,!1);let r=Kt(""),u;async function a(){!P(r).trim()||n()||(e.submit(P(r).trim()),Ft(r,""),u&&(u.style.height="auto"))}function i(){u&&(u.style.height=`${u.scrollHeight}px`)}var l=Nr(),c=N(l),s=N(c);Xe(s),s.__input=i,s.__keydown=[Rr,a],Je(s,!0),pn(s,h=>u=h,()=>u);var f=V(s,2),o=V(N(f),2);o.__click=a;var g=N(o,!0);B(o),B(f),B(c),B(l),Ct(h=>{o.disabled=h,vt(g,n()?"Generating response...":"Send")},[()=>!P(r).trim()||n()]),Jn(s,()=>P(r),h=>Ft(r,h)),U(t,l),Mt()}Un(["input","keydown","click"]);const Dn=document.createElement("i");function ee(t){const e="&"+t+";";Dn.innerHTML=e;const n=Dn.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function at(t,e,n,r){const u=t.length;let a=0,i;if(e<0?e=-e>u?0:u+e:e=e>u?u:e,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(e,n),t.splice(...i);else for(n&&t.splice(e,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(e,0),t.splice(...i),a+=1e4,e+=1e4}function Z(t,e){return t.length>0?(at(t,t.length,0,e),t):e}const on={}.hasOwnProperty;function re(t){const e={};let n=-1;for(;++n<t.length;)Hr(e,t[n]);return e}function Hr(t,e){let n;for(n in e){const u=(on.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let i;if(a)for(i in a){on.call(u,i)||(u[i]=[]);const l=a[i];jr(u[i],Array.isArray(l)?l:l?[l]:[])}}}function jr(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);at(t,0,0,r)}function Vr(t){const e={};let n=-1;for(;++n<t.length;)$r(e,t[n]);return e}function $r(t,e){let n;for(n in e){const u=(on.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let i;if(a)for(i in a)u[i]=a[i]}}function Ur(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}const Wr={'"':"quot","&":"amp","<":"lt",">":"gt"};function ie(t){return t.replace(/["&<>]/g,e);function e(n){return"&"+Wr[n]+";"}}function wt(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const tt=yt(/[A-Za-z]/),K=yt(/[\dA-Za-z]/),Qr=yt(/[#-'*+\--9=?A-Z^-~]/);function Gt(t){return t!==null&&(t<32||t===127)}const sn=yt(/\d/),Yr=yt(/[\dA-Fa-f]/),Gr=yt(/[!-/:-@[-`{-~]/);function F(t){return t!==null&&t<-2}function j(t){return t!==null&&(t<0||t===32)}function R(t){return t===-2||t===-1||t===32}const gn=yt(new RegExp("\\p{P}|\\p{S}","u")),At=yt(/\s/);function yt(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function qt(t,e){const n=ie(Zr(t||""));if(!e)return n;const r=n.indexOf(":"),u=n.indexOf("?"),a=n.indexOf("#"),i=n.indexOf("/");return r<0||i>-1&&r>i||u>-1&&r>u||a>-1&&r>a||e.test(n.slice(0,r))?n:""}function Zr(t){const e=[];let n=-1,r=0,u=0;for(;++n<t.length;){const a=t.charCodeAt(n);let i="";if(a===37&&K(t.charCodeAt(n+1))&&K(t.charCodeAt(n+2)))u=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(i=String.fromCharCode(a));else if(a>55295&&a<57344){const l=t.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(i=String.fromCharCode(a,l),u=1):i="�"}else i=String.fromCharCode(a);i&&(e.push(t.slice(r,n),encodeURIComponent(i)),r=n+u+1,i=""),u&&(n+=u,u=0)}return e.join("")+t.slice(r)}const Ln={}.hasOwnProperty,Pn=/^(https?|ircs?|mailto|xmpp)$/i,Kr=/^https?$/i;function Xr(t){const e=t||{};let n=!0;const r={},u=[[]],a=[],i=[],c=Vr([{enter:{blockQuote:L,codeFenced:it,codeFencedFenceInfo:v,codeFencedFenceMeta:v,codeIndented:ut,codeText:He,content:Fe,definition:_e,definitionDestinationString:Ce,definitionLabelString:v,definitionTitleString:v,emphasis:Ne,htmlFlow:Re,htmlText:wn,image:nt,label:v,link:ot,listItemMarker:C,listItemValue:d,listOrdered:T,listUnordered:O,paragraph:Q,reference:v,resource:mt,resourceDestinationString:pt,resourceTitleString:v,setextHeading:Te,strong:qe},exit:{atxHeading:Le,atxHeadingSequence:Ae,autolinkEmail:Ye,autolinkProtocol:Qe,blockQuote:W,characterEscapeValue:Tt,characterReferenceMarkerHexadecimal:yn,characterReferenceMarkerNumeric:yn,characterReferenceValue:We,codeFenced:p,codeFencedFence:J,codeFencedFenceInfo:m,codeFencedFenceMeta:A,codeFlowValue:Be,codeIndented:p,codeText:je,codeTextData:Tt,data:Tt,definition:Ee,definitionDestinationString:ve,definitionLabelString:Ie,definitionTitleString:ze,emphasis:Ve,hardBreakEscape:bn,hardBreakTrailing:bn,htmlFlow:kn,htmlFlowData:Tt,htmlText:kn,htmlTextData:Tt,image:Rt,label:bt,labelText:Y,lineEnding:Me,link:Rt,listOrdered:I,listUnordered:M,paragraph:rt,reference:A,referenceString:st,resource:A,resourceDestinationString:St,resourceTitleString:Jt,setextHeading:Oe,setextHeadingLineSequence:Pe,setextHeadingText:De,strong:$e,thematicBreak:Ue}},...e.htmlExtensions||[]]),s={definitions:r,tightStack:i},f={buffer:v,encode:b,getData:S,lineEndingIfNeeded:z,options:e,raw:w,resume:k,setData:x,tag:y};let o=e.defaultLineEnding;return g;function g(_){let E=-1,G=0;const lt=[];let ct=[],gt=[];for(;++E<_.length;)!o&&(_[E][1].type==="lineEnding"||_[E][1].type==="lineEndingBlank")&&(o=_[E][2].sliceSerialize(_[E][1])),(_[E][1].type==="listOrdered"||_[E][1].type==="listUnordered")&&(_[E][0]==="enter"?lt.push(E):h(_.slice(lt.pop(),E))),_[E][1].type==="definition"&&(_[E][0]==="enter"?(gt=Z(gt,_.slice(G,E)),G=E):(ct=Z(ct,_.slice(G,E+1)),G=E+1));ct=Z(ct,gt),ct=Z(ct,_.slice(G)),E=-1;const ht=ct;for(c.enter.null&&c.enter.null.call(f);++E<_.length;){const Sn=c[ht[E][0]],_n=ht[E][1].type,In=Sn[_n];Ln.call(Sn,_n)&&In&&In.call({sliceSerialize:ht[E][2].sliceSerialize,...f},ht[E][1])}return c.exit.null&&c.exit.null.call(f),u[0].join("")}function h(_){const E=_.length;let G=0,lt=0,ct=!1,gt;for(;++G<E;){const ht=_[G];if(ht[1]._container)gt=void 0,ht[0]==="enter"?lt++:lt--;else switch(ht[1].type){case"listItemPrefix":{ht[0]==="exit"&&(gt=!0);break}case"linePrefix":break;case"lineEndingBlank":{ht[0]==="enter"&&!lt&&(gt?gt=void 0:ct=!0);break}default:gt=void 0}}_[0][1]._loose=ct}function x(_,E){s[_]=E}function S(_){return s[_]}function v(){u.push([])}function k(){return u.pop().join("")}function y(_){n&&(x("lastWasTag",!0),u[u.length-1].push(_))}function w(_){x("lastWasTag"),u[u.length-1].push(_)}function D(){w(o||`
`)}function z(){const _=u[u.length-1],E=_[_.length-1],G=E?E.charCodeAt(E.length-1):null;G===10||G===13||G===null||D()}function b(_){return S("ignoreEncode")?_:ie(_)}function A(){k()}function T(_){i.push(!_._loose),z(),y("<ol"),x("expectFirstItem",!0)}function O(_){i.push(!_._loose),z(),y("<ul"),x("expectFirstItem",!0)}function d(_){if(S("expectFirstItem")){const E=Number.parseInt(this.sliceSerialize(_),10);E!==1&&y(' start="'+b(String(E))+'"')}}function C(){S("expectFirstItem")?y(">"):H(),z(),y("<li>"),x("expectFirstItem"),x("lastWasTag")}function I(){H(),i.pop(),D(),y("</ol>")}function M(){H(),i.pop(),D(),y("</ul>")}function H(){S("lastWasTag")&&!S("slurpAllLineEndings")&&z(),y("</li>"),x("slurpAllLineEndings")}function L(){i.push(!1),z(),y("<blockquote>")}function W(){i.pop(),z(),y("</blockquote>"),x("slurpAllLineEndings")}function Q(){i[i.length-1]||(z(),y("<p>")),x("slurpAllLineEndings")}function rt(){i[i.length-1]?x("slurpAllLineEndings",!0):y("</p>")}function it(){z(),y("<pre><code"),x("fencesCount",0)}function m(){const _=k();y(' class="language-'+_+'"')}function J(){const _=S("fencesCount")||0;_||(y(">"),x("slurpOneLineEnding",!0)),x("fencesCount",_+1)}function ut(){z(),y("<pre><code>")}function p(){const _=S("fencesCount");_!==void 0&&_<2&&s.tightStack.length>0&&!S("lastWasTag")&&D(),S("flowCodeSeenData")&&z(),y("</code></pre>"),_!==void 0&&_<2&&z(),x("flowCodeSeenData"),x("fencesCount"),x("slurpOneLineEnding")}function nt(){a.push({image:!0}),n=void 0}function ot(){a.push({})}function Y(_){a[a.length-1].labelId=this.sliceSerialize(_)}function bt(){a[a.length-1].label=k()}function st(_){a[a.length-1].referenceId=this.sliceSerialize(_)}function mt(){v(),a[a.length-1].destination=""}function pt(){v(),x("ignoreEncode",!0)}function St(){a[a.length-1].destination=k(),x("ignoreEncode")}function Jt(){a[a.length-1].title=k()}function Rt(){let _=a.length-1;const E=a[_],G=E.referenceId||E.labelId,lt=E.destination===void 0?r[wt(G)]:E;for(n=!0;_--;)if(a[_].image){n=void 0;break}E.image?(y('<img src="'+qt(lt.destination,e.allowDangerousProtocol?void 0:Kr)+'" alt="'),w(E.label),y('"')):y('<a href="'+qt(lt.destination,e.allowDangerousProtocol?void 0:Pn)+'"'),y(lt.title?' title="'+lt.title+'"':""),E.image?y(" />"):(y(">"),w(E.label),y("</a>")),a.pop()}function _e(){v(),a.push({})}function Ie(_){k(),a[a.length-1].labelId=this.sliceSerialize(_)}function Ce(){v(),x("ignoreEncode",!0)}function ve(){a[a.length-1].destination=k(),x("ignoreEncode")}function ze(){a[a.length-1].title=k()}function Ee(){const _=a[a.length-1],E=wt(_.labelId);k(),Ln.call(r,E)||(r[E]=a[a.length-1]),a.pop()}function Fe(){x("slurpAllLineEndings",!0)}function Ae(_){S("headingRank")||(x("headingRank",this.sliceSerialize(_).length),z(),y("<h"+S("headingRank")+">"))}function Te(){v(),x("slurpAllLineEndings")}function De(){x("slurpAllLineEndings",!0)}function Le(){y("</h"+S("headingRank")+">"),x("headingRank")}function Pe(_){x("headingRank",this.sliceSerialize(_).charCodeAt(0)===61?1:2)}function Oe(){const _=k();z(),y("<h"+S("headingRank")+">"),w(_),y("</h"+S("headingRank")+">"),x("slurpAllLineEndings"),x("headingRank")}function Tt(_){w(b(this.sliceSerialize(_)))}function Me(_){if(!S("slurpAllLineEndings")){if(S("slurpOneLineEnding")){x("slurpOneLineEnding");return}if(S("inCodeText")){w(" ");return}w(b(this.sliceSerialize(_)))}}function Be(_){w(b(this.sliceSerialize(_))),x("flowCodeSeenData",!0)}function bn(){y("<br />")}function Re(){z(),wn()}function kn(){x("ignoreEncode")}function wn(){e.allowDangerousHtml&&x("ignoreEncode",!0)}function Ne(){y("<em>")}function qe(){y("<strong>")}function He(){x("inCodeText",!0),y("<code>")}function je(){x("inCodeText"),y("</code>")}function Ve(){y("</em>")}function $e(){y("</strong>")}function Ue(){z(),y("<hr />")}function yn(_){x("characterReferenceType",_.type)}function We(_){const E=this.sliceSerialize(_),G=S("characterReferenceType")?Ur(E,S("characterReferenceType")==="characterReferenceMarkerNumeric"?10:16):ee(E);w(b(G)),x("characterReferenceType")}function Qe(_){const E=this.sliceSerialize(_);y('<a href="'+qt(E,e.allowDangerousProtocol?void 0:Pn)+'">'),w(b(E)),y("</a>")}function Ye(_){const E=this.sliceSerialize(_);y('<a href="'+qt("mailto:"+E)+'">'),w(b(E)),y("</a>")}}function q(t,e,n,r){const u=r?r-1:Number.POSITIVE_INFINITY;let a=0;return i;function i(c){return R(c)?(t.enter(n),l(c)):e(c)}function l(c){return R(c)&&a++<u?(t.consume(c),l):(t.exit(n),e(c))}}const Jr={tokenize:ti};function ti(t){const e=t.attempt(this.parser.constructs.contentInitial,r,u);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),q(t,e,"linePrefix")}function u(l){return t.enter("paragraph"),a(l)}function a(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,i(l)}function i(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return F(l)?(t.consume(l),t.exit("chunkText"),a):(t.consume(l),i)}}const ni={tokenize:ei},On={tokenize:ri};function ei(t){const e=this,n=[];let r=0,u,a,i;return l;function l(w){if(r<n.length){const D=n[r];return e.containerState=D[1],t.attempt(D[0].continuation,c,s)(w)}return s(w)}function c(w){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,u&&y();const D=e.events.length;let z=D,b;for(;z--;)if(e.events[z][0]==="exit"&&e.events[z][1].type==="chunkFlow"){b=e.events[z][1].end;break}k(r);let A=D;for(;A<e.events.length;)e.events[A][1].end={...b},A++;return at(e.events,z+1,0,e.events.slice(D)),e.events.length=A,s(w)}return l(w)}function s(w){if(r===n.length){if(!u)return g(w);if(u.currentConstruct&&u.currentConstruct.concrete)return x(w);e.interrupt=!!(u.currentConstruct&&!u._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(On,f,o)(w)}function f(w){return u&&y(),k(r),g(w)}function o(w){return e.parser.lazy[e.now().line]=r!==n.length,i=e.now().offset,x(w)}function g(w){return e.containerState={},t.attempt(On,h,x)(w)}function h(w){return r++,n.push([e.currentConstruct,e.containerState]),g(w)}function x(w){if(w===null){u&&y(),k(0),t.consume(w);return}return u=u||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:u,contentType:"flow",previous:a}),S(w)}function S(w){if(w===null){v(t.exit("chunkFlow"),!0),k(0),t.consume(w);return}return F(w)?(t.consume(w),v(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(w),S)}function v(w,D){const z=e.sliceStream(w);if(D&&z.push(null),w.previous=a,a&&(a.next=w),a=w,u.defineSkip(w.start),u.write(z),e.parser.lazy[w.start.line]){let b=u.events.length;for(;b--;)if(u.events[b][1].start.offset<i&&(!u.events[b][1].end||u.events[b][1].end.offset>i))return;const A=e.events.length;let T=A,O,d;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){if(O){d=e.events[T][1].end;break}O=!0}for(k(r),b=A;b<e.events.length;)e.events[b][1].end={...d},b++;at(e.events,T+1,0,e.events.slice(A)),e.events.length=b}}function k(w){let D=n.length;for(;D-- >w;){const z=n[D];e.containerState=z[1],z[0].exit.call(e,t)}n.length=w}function y(){u.write([null]),a=void 0,u=void 0,e.containerState._closeFlow=void 0}}function ri(t,e,n){return q(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Zt(t){if(t===null||j(t)||At(t))return 1;if(gn(t))return 2}function Xt(t,e,n){const r=[];let u=-1;for(;++u<t.length;){const a=t[u].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const cn={name:"attention",resolveAll:ii,tokenize:ui};function ii(t,e){let n=-1,r,u,a,i,l,c,s,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const o={...t[r][1].end},g={...t[n][1].start};Mn(o,-c),Mn(g,c),i={type:c>1?"strongSequence":"emphasisSequence",start:o,end:{...t[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},a={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},u={type:c>1?"strong":"emphasis",start:{...i.start},end:{...l.end}},t[r][1].end={...i.start},t[n][1].start={...l.end},s=[],t[r][1].end.offset-t[r][1].start.offset&&(s=Z(s,[["enter",t[r][1],e],["exit",t[r][1],e]])),s=Z(s,[["enter",u,e],["enter",i,e],["exit",i,e],["enter",a,e]]),s=Z(s,Xt(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),s=Z(s,[["exit",a,e],["enter",l,e],["exit",l,e],["exit",u,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,s=Z(s,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,at(t,r-1,n-r+3,s),n=r+s.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function ui(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,u=Zt(r);let a;return i;function i(c){return a=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===a)return t.consume(c),l;const s=t.exit("attentionSequence"),f=Zt(c),o=!f||f===2&&u||n.includes(c),g=!u||u===2&&f||n.includes(r);return s._open=!!(a===42?o:o&&(u||!g)),s._close=!!(a===42?g:g&&(f||!o)),e(c)}}function Mn(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const ai={name:"autolink",tokenize:li};function li(t,e,n){let r=0;return u;function u(h){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(h){return tt(h)?(t.consume(h),i):h===64?n(h):s(h)}function i(h){return h===43||h===45||h===46||K(h)?(r=1,l(h)):s(h)}function l(h){return h===58?(t.consume(h),r=0,c):(h===43||h===45||h===46||K(h))&&r++<32?(t.consume(h),l):(r=0,s(h))}function c(h){return h===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.exit("autolink"),e):h===null||h===32||h===60||Gt(h)?n(h):(t.consume(h),c)}function s(h){return h===64?(t.consume(h),f):Qr(h)?(t.consume(h),s):n(h)}function f(h){return K(h)?o(h):n(h)}function o(h){return h===46?(t.consume(h),r=0,f):h===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.exit("autolink"),e):g(h)}function g(h){if((h===45||K(h))&&r++<63){const x=h===45?g:o;return t.consume(h),x}return n(h)}}const Bt={partial:!0,tokenize:oi};function oi(t,e,n){return r;function r(a){return R(a)?q(t,u,"linePrefix")(a):u(a)}function u(a){return a===null||F(a)?e(a):n(a)}}const ue={continuation:{tokenize:ci},exit:hi,name:"blockQuote",tokenize:si};function si(t,e,n){const r=this;return u;function u(i){if(i===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(i),t.exit("blockQuoteMarker"),a}return n(i)}function a(i){return R(i)?(t.enter("blockQuotePrefixWhitespace"),t.consume(i),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(i))}}function ci(t,e,n){const r=this;return u;function u(i){return R(i)?q(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i):a(i)}function a(i){return t.attempt(ue,e,n)(i)}}function hi(t){t.exit("blockQuote")}const ae={name:"characterEscape",tokenize:fi};function fi(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),u}function u(a){return Gr(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const le={name:"characterReference",tokenize:mi};function mi(t,e,n){const r=this;let u=0,a,i;return l;function l(o){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(o),t.exit("characterReferenceMarker"),c}function c(o){return o===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(o),t.exit("characterReferenceMarkerNumeric"),s):(t.enter("characterReferenceValue"),a=31,i=K,f(o))}function s(o){return o===88||o===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(o),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,i=Yr,f):(t.enter("characterReferenceValue"),a=7,i=sn,f(o))}function f(o){if(o===59&&u){const g=t.exit("characterReferenceValue");return i===K&&!ee(r.sliceSerialize(g))?n(o):(t.enter("characterReferenceMarker"),t.consume(o),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return i(o)&&u++<a?(t.consume(o),f):n(o)}}const Bn={partial:!0,tokenize:gi},Rn={concrete:!0,name:"codeFenced",tokenize:pi};function pi(t,e,n){const r=this,u={partial:!0,tokenize:z};let a=0,i=0,l;return c;function c(b){return s(b)}function s(b){const A=r.events[r.events.length-1];return a=A&&A[1].type==="linePrefix"?A[2].sliceSerialize(A[1],!0).length:0,l=b,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(b)}function f(b){return b===l?(i++,t.consume(b),f):i<3?n(b):(t.exit("codeFencedFenceSequence"),R(b)?q(t,o,"whitespace")(b):o(b))}function o(b){return b===null||F(b)?(t.exit("codeFencedFence"),r.interrupt?e(b):t.check(Bn,S,D)(b)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===null||F(b)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),o(b)):R(b)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),q(t,h,"whitespace")(b)):b===96&&b===l?n(b):(t.consume(b),g)}function h(b){return b===null||F(b)?o(b):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(b))}function x(b){return b===null||F(b)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),o(b)):b===96&&b===l?n(b):(t.consume(b),x)}function S(b){return t.attempt(u,D,v)(b)}function v(b){return t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),k}function k(b){return a>0&&R(b)?q(t,y,"linePrefix",a+1)(b):y(b)}function y(b){return b===null||F(b)?t.check(Bn,S,D)(b):(t.enter("codeFlowValue"),w(b))}function w(b){return b===null||F(b)?(t.exit("codeFlowValue"),y(b)):(t.consume(b),w)}function D(b){return t.exit("codeFenced"),e(b)}function z(b,A,T){let O=0;return d;function d(L){return b.enter("lineEnding"),b.consume(L),b.exit("lineEnding"),C}function C(L){return b.enter("codeFencedFence"),R(L)?q(b,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):I(L)}function I(L){return L===l?(b.enter("codeFencedFenceSequence"),M(L)):T(L)}function M(L){return L===l?(O++,b.consume(L),M):O>=i?(b.exit("codeFencedFenceSequence"),R(L)?q(b,H,"whitespace")(L):H(L)):T(L)}function H(L){return L===null||F(L)?(b.exit("codeFencedFence"),A(L)):T(L)}}}function gi(t,e,n){const r=this;return u;function u(i){return i===null?n(i):(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),a)}function a(i){return r.parser.lazy[r.now().line]?n(i):e(i)}}const nn={name:"codeIndented",tokenize:di},xi={partial:!0,tokenize:bi};function di(t,e,n){const r=this;return u;function u(s){return t.enter("codeIndented"),q(t,a,"linePrefix",5)(s)}function a(s){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?i(s):n(s)}function i(s){return s===null?c(s):F(s)?t.attempt(xi,i,c)(s):(t.enter("codeFlowValue"),l(s))}function l(s){return s===null||F(s)?(t.exit("codeFlowValue"),i(s)):(t.consume(s),l)}function c(s){return t.exit("codeIndented"),e(s)}}function bi(t,e,n){const r=this;return u;function u(i){return r.parser.lazy[r.now().line]?n(i):F(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),u):q(t,a,"linePrefix",5)(i)}function a(i){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(i):F(i)?u(i):n(i)}}const ki={name:"codeText",previous:yi,resolve:wi,tokenize:Si};function wi(t){let e=t.length-4,n=3,r,u;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)u===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(u=r):(r===e||t[r][1].type==="lineEnding")&&(t[u][1].type="codeTextData",r!==u+2&&(t[u][1].end=t[r-1][1].end,t.splice(u+2,r-u-2),e-=r-u-2,r=u+2),u=void 0);return t}function yi(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Si(t,e,n){let r=0,u,a;return i;function i(o){return t.enter("codeText"),t.enter("codeTextSequence"),l(o)}function l(o){return o===96?(t.consume(o),r++,l):(t.exit("codeTextSequence"),c(o))}function c(o){return o===null?n(o):o===32?(t.enter("space"),t.consume(o),t.exit("space"),c):o===96?(a=t.enter("codeTextSequence"),u=0,f(o)):F(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),c):(t.enter("codeTextData"),s(o))}function s(o){return o===null||o===32||o===96||F(o)?(t.exit("codeTextData"),c(o)):(t.consume(o),s)}function f(o){return o===96?(t.consume(o),u++,f):u===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(o)):(a.type="codeTextData",s(o))}}class _i{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const u=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-u,Number.POSITIVE_INFINITY);return r&&Dt(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Dt(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Dt(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Dt(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Dt(this.left,n.reverse())}}}function Dt(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function oe(t){const e={};let n=-1,r,u,a,i,l,c,s;const f=new _i(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Ii(f,n)),n=e[n],s=!0);else if(r[1]._container){for(a=n,u=void 0;a--;)if(i=f.get(a),i[1].type==="lineEnding"||i[1].type==="lineEndingBlank")i[0]==="enter"&&(u&&(f.get(u)[1].type="lineEndingBlank"),i[1].type="lineEnding",u=a);else if(!(i[1].type==="linePrefix"||i[1].type==="listItemIndent"))break;u&&(r[1].end={...f.get(u)[1].start},l=f.slice(u,n),l.unshift(r),f.splice(u,n-u+1,l))}}return at(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!s}function Ii(t,e){const n=t.get(e)[1],r=t.get(e)[2];let u=e-1;const a=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const l=i.events,c=[],s={};let f,o,g=-1,h=n,x=0,S=0;const v=[S];for(;h;){for(;t.get(++u)[1]!==h;);a.push(u),h._tokenizer||(f=r.sliceStream(h),h.next||f.push(null),o&&i.defineSkip(h.start),h._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(f),h._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),o=h,h=h.next}for(h=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(S=g+1,v.push(S),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(i.events=[],h?(h._tokenizer=void 0,h.previous=void 0):v.pop(),g=v.length;g--;){const k=l.slice(v[g],v[g+1]),y=a.pop();c.push([y,y+k.length-1]),t.splice(y,2,k)}for(c.reverse(),g=-1;++g<c.length;)s[x+c[g][0]]=x+c[g][1],x+=c[g][1]-c[g][0]-1;return s}const Ci={resolve:zi,tokenize:Ei},vi={partial:!0,tokenize:Fi};function zi(t){return oe(t),t}function Ei(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),u(l)}function u(l){return l===null?a(l):F(l)?t.check(vi,i,a)(l):(t.consume(l),u)}function a(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function i(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,u}}function Fi(t,e,n){const r=this;return u;function u(i){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),q(t,a,"linePrefix")}function a(i){if(i===null||F(i))return n(i);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(i):t.interrupt(r.parser.constructs.flow,n,e)(i)}}function se(t,e,n,r,u,a,i,l,c){const s=c||Number.POSITIVE_INFINITY;let f=0;return o;function o(k){return k===60?(t.enter(r),t.enter(u),t.enter(a),t.consume(k),t.exit(a),g):k===null||k===32||k===41||Gt(k)?n(k):(t.enter(r),t.enter(i),t.enter(l),t.enter("chunkString",{contentType:"string"}),S(k))}function g(k){return k===62?(t.enter(a),t.consume(k),t.exit(a),t.exit(u),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),h(k))}function h(k){return k===62?(t.exit("chunkString"),t.exit(l),g(k)):k===null||k===60||F(k)?n(k):(t.consume(k),k===92?x:h)}function x(k){return k===60||k===62||k===92?(t.consume(k),h):h(k)}function S(k){return!f&&(k===null||k===41||j(k))?(t.exit("chunkString"),t.exit(l),t.exit(i),t.exit(r),e(k)):f<s&&k===40?(t.consume(k),f++,S):k===41?(t.consume(k),f--,S):k===null||k===32||k===40||Gt(k)?n(k):(t.consume(k),k===92?v:S)}function v(k){return k===40||k===41||k===92?(t.consume(k),S):S(k)}}function ce(t,e,n,r,u,a){const i=this;let l=0,c;return s;function s(h){return t.enter(r),t.enter(u),t.consume(h),t.exit(u),t.enter(a),f}function f(h){return l>999||h===null||h===91||h===93&&!c||h===94&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(h):h===93?(t.exit(a),t.enter(u),t.consume(h),t.exit(u),t.exit(r),e):F(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),o(h))}function o(h){return h===null||h===91||h===93||F(h)||l++>999?(t.exit("chunkString"),f(h)):(t.consume(h),c||(c=!R(h)),h===92?g:o)}function g(h){return h===91||h===92||h===93?(t.consume(h),l++,o):o(h)}}function he(t,e,n,r,u,a){let i;return l;function l(g){return g===34||g===39||g===40?(t.enter(r),t.enter(u),t.consume(g),t.exit(u),i=g===40?41:g,c):n(g)}function c(g){return g===i?(t.enter(u),t.consume(g),t.exit(u),t.exit(r),e):(t.enter(a),s(g))}function s(g){return g===i?(t.exit(a),c(i)):g===null?n(g):F(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),q(t,s,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===i||g===null||F(g)?(t.exit("chunkString"),s(g)):(t.consume(g),g===92?o:f)}function o(g){return g===i||g===92?(t.consume(g),f):f(g)}}function Lt(t,e){let n;return r;function r(u){return F(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),n=!0,r):R(u)?q(t,r,n?"linePrefix":"lineSuffix")(u):e(u)}}const Ai={name:"definition",tokenize:Di},Ti={partial:!0,tokenize:Li};function Di(t,e,n){const r=this;let u;return a;function a(h){return t.enter("definition"),i(h)}function i(h){return ce.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function l(h){return u=wt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(t.enter("definitionMarker"),t.consume(h),t.exit("definitionMarker"),c):n(h)}function c(h){return j(h)?Lt(t,s)(h):s(h)}function s(h){return se(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function f(h){return t.attempt(Ti,o,o)(h)}function o(h){return R(h)?q(t,g,"whitespace")(h):g(h)}function g(h){return h===null||F(h)?(t.exit("definition"),r.parser.defined.push(u),e(h)):n(h)}}function Li(t,e,n){return r;function r(l){return j(l)?Lt(t,u)(l):n(l)}function u(l){return he(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return R(l)?q(t,i,"whitespace")(l):i(l)}function i(l){return l===null||F(l)?e(l):n(l)}}const Pi={name:"hardBreakEscape",tokenize:Oi};function Oi(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),u}function u(a){return F(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const Mi={name:"headingAtx",resolve:Bi,tokenize:Ri};function Bi(t,e){let n=t.length-2,r=3,u,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(u={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},at(t,r,n-r+1,[["enter",u,e],["enter",a,e],["exit",a,e],["exit",u,e]])),t}function Ri(t,e,n){let r=0;return u;function u(f){return t.enter("atxHeading"),a(f)}function a(f){return t.enter("atxHeadingSequence"),i(f)}function i(f){return f===35&&r++<6?(t.consume(f),i):f===null||j(f)?(t.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||F(f)?(t.exit("atxHeading"),e(f)):R(f)?q(t,l,"whitespace")(f):(t.enter("atxHeadingText"),s(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),l(f))}function s(f){return f===null||f===35||j(f)?(t.exit("atxHeadingText"),l(f)):(t.consume(f),s)}}const Ni=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Nn=["pre","script","style","textarea"],qi={concrete:!0,name:"htmlFlow",resolveTo:Vi,tokenize:$i},Hi={partial:!0,tokenize:Wi},ji={partial:!0,tokenize:Ui};function Vi(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function $i(t,e,n){const r=this;let u,a,i,l,c;return s;function s(p){return f(p)}function f(p){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(p),o}function o(p){return p===33?(t.consume(p),g):p===47?(t.consume(p),a=!0,S):p===63?(t.consume(p),u=3,r.interrupt?e:m):tt(p)?(t.consume(p),i=String.fromCharCode(p),v):n(p)}function g(p){return p===45?(t.consume(p),u=2,h):p===91?(t.consume(p),u=5,l=0,x):tt(p)?(t.consume(p),u=4,r.interrupt?e:m):n(p)}function h(p){return p===45?(t.consume(p),r.interrupt?e:m):n(p)}function x(p){const nt="CDATA[";return p===nt.charCodeAt(l++)?(t.consume(p),l===nt.length?r.interrupt?e:I:x):n(p)}function S(p){return tt(p)?(t.consume(p),i=String.fromCharCode(p),v):n(p)}function v(p){if(p===null||p===47||p===62||j(p)){const nt=p===47,ot=i.toLowerCase();return!nt&&!a&&Nn.includes(ot)?(u=1,r.interrupt?e(p):I(p)):Ni.includes(i.toLowerCase())?(u=6,nt?(t.consume(p),k):r.interrupt?e(p):I(p)):(u=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(p):a?y(p):w(p))}return p===45||K(p)?(t.consume(p),i+=String.fromCharCode(p),v):n(p)}function k(p){return p===62?(t.consume(p),r.interrupt?e:I):n(p)}function y(p){return R(p)?(t.consume(p),y):d(p)}function w(p){return p===47?(t.consume(p),d):p===58||p===95||tt(p)?(t.consume(p),D):R(p)?(t.consume(p),w):d(p)}function D(p){return p===45||p===46||p===58||p===95||K(p)?(t.consume(p),D):z(p)}function z(p){return p===61?(t.consume(p),b):R(p)?(t.consume(p),z):w(p)}function b(p){return p===null||p===60||p===61||p===62||p===96?n(p):p===34||p===39?(t.consume(p),c=p,A):R(p)?(t.consume(p),b):T(p)}function A(p){return p===c?(t.consume(p),c=null,O):p===null||F(p)?n(p):(t.consume(p),A)}function T(p){return p===null||p===34||p===39||p===47||p===60||p===61||p===62||p===96||j(p)?z(p):(t.consume(p),T)}function O(p){return p===47||p===62||R(p)?w(p):n(p)}function d(p){return p===62?(t.consume(p),C):n(p)}function C(p){return p===null||F(p)?I(p):R(p)?(t.consume(p),C):n(p)}function I(p){return p===45&&u===2?(t.consume(p),W):p===60&&u===1?(t.consume(p),Q):p===62&&u===4?(t.consume(p),J):p===63&&u===3?(t.consume(p),m):p===93&&u===5?(t.consume(p),it):F(p)&&(u===6||u===7)?(t.exit("htmlFlowData"),t.check(Hi,ut,M)(p)):p===null||F(p)?(t.exit("htmlFlowData"),M(p)):(t.consume(p),I)}function M(p){return t.check(ji,H,ut)(p)}function H(p){return t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),L}function L(p){return p===null||F(p)?M(p):(t.enter("htmlFlowData"),I(p))}function W(p){return p===45?(t.consume(p),m):I(p)}function Q(p){return p===47?(t.consume(p),i="",rt):I(p)}function rt(p){if(p===62){const nt=i.toLowerCase();return Nn.includes(nt)?(t.consume(p),J):I(p)}return tt(p)&&i.length<8?(t.consume(p),i+=String.fromCharCode(p),rt):I(p)}function it(p){return p===93?(t.consume(p),m):I(p)}function m(p){return p===62?(t.consume(p),J):p===45&&u===2?(t.consume(p),m):I(p)}function J(p){return p===null||F(p)?(t.exit("htmlFlowData"),ut(p)):(t.consume(p),J)}function ut(p){return t.exit("htmlFlow"),e(p)}}function Ui(t,e,n){const r=this;return u;function u(i){return F(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),a):n(i)}function a(i){return r.parser.lazy[r.now().line]?n(i):e(i)}}function Wi(t,e,n){return r;function r(u){return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),t.attempt(Bt,e,n)}}const Qi={name:"htmlText",tokenize:Yi};function Yi(t,e,n){const r=this;let u,a,i;return l;function l(m){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(m),c}function c(m){return m===33?(t.consume(m),s):m===47?(t.consume(m),z):m===63?(t.consume(m),w):tt(m)?(t.consume(m),T):n(m)}function s(m){return m===45?(t.consume(m),f):m===91?(t.consume(m),a=0,x):tt(m)?(t.consume(m),y):n(m)}function f(m){return m===45?(t.consume(m),h):n(m)}function o(m){return m===null?n(m):m===45?(t.consume(m),g):F(m)?(i=o,Q(m)):(t.consume(m),o)}function g(m){return m===45?(t.consume(m),h):o(m)}function h(m){return m===62?W(m):m===45?g(m):o(m)}function x(m){const J="CDATA[";return m===J.charCodeAt(a++)?(t.consume(m),a===J.length?S:x):n(m)}function S(m){return m===null?n(m):m===93?(t.consume(m),v):F(m)?(i=S,Q(m)):(t.consume(m),S)}function v(m){return m===93?(t.consume(m),k):S(m)}function k(m){return m===62?W(m):m===93?(t.consume(m),k):S(m)}function y(m){return m===null||m===62?W(m):F(m)?(i=y,Q(m)):(t.consume(m),y)}function w(m){return m===null?n(m):m===63?(t.consume(m),D):F(m)?(i=w,Q(m)):(t.consume(m),w)}function D(m){return m===62?W(m):w(m)}function z(m){return tt(m)?(t.consume(m),b):n(m)}function b(m){return m===45||K(m)?(t.consume(m),b):A(m)}function A(m){return F(m)?(i=A,Q(m)):R(m)?(t.consume(m),A):W(m)}function T(m){return m===45||K(m)?(t.consume(m),T):m===47||m===62||j(m)?O(m):n(m)}function O(m){return m===47?(t.consume(m),W):m===58||m===95||tt(m)?(t.consume(m),d):F(m)?(i=O,Q(m)):R(m)?(t.consume(m),O):W(m)}function d(m){return m===45||m===46||m===58||m===95||K(m)?(t.consume(m),d):C(m)}function C(m){return m===61?(t.consume(m),I):F(m)?(i=C,Q(m)):R(m)?(t.consume(m),C):O(m)}function I(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(t.consume(m),u=m,M):F(m)?(i=I,Q(m)):R(m)?(t.consume(m),I):(t.consume(m),H)}function M(m){return m===u?(t.consume(m),u=void 0,L):m===null?n(m):F(m)?(i=M,Q(m)):(t.consume(m),M)}function H(m){return m===null||m===34||m===39||m===60||m===61||m===96?n(m):m===47||m===62||j(m)?O(m):(t.consume(m),H)}function L(m){return m===47||m===62||j(m)?O(m):n(m)}function W(m){return m===62?(t.consume(m),t.exit("htmlTextData"),t.exit("htmlText"),e):n(m)}function Q(m){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),rt}function rt(m){return R(m)?q(t,it,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(m):it(m)}function it(m){return t.enter("htmlTextData"),i(m)}}const xn={name:"labelEnd",resolveAll:Xi,resolveTo:Ji,tokenize:tu},Gi={tokenize:nu},Zi={tokenize:eu},Ki={tokenize:ru};function Xi(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const u=r.type==="labelImage"?4:2;r.type="data",e+=u}}return t.length!==n.length&&at(t,0,t.length,n),t}function Ji(t,e){let n=t.length,r=0,u,a,i,l;for(;n--;)if(u=t[n][1],a){if(u.type==="link"||u.type==="labelLink"&&u._inactive)break;t[n][0]==="enter"&&u.type==="labelLink"&&(u._inactive=!0)}else if(i){if(t[n][0]==="enter"&&(u.type==="labelImage"||u.type==="labelLink")&&!u._balanced&&(a=n,u.type!=="labelLink")){r=2;break}}else u.type==="labelEnd"&&(i=n);const c={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},s={type:"label",start:{...t[a][1].start},end:{...t[i][1].end}},f={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[i-2][1].start}};return l=[["enter",c,e],["enter",s,e]],l=Z(l,t.slice(a+1,a+r+3)),l=Z(l,[["enter",f,e]]),l=Z(l,Xt(e.parser.constructs.insideSpan.null,t.slice(a+r+4,i-3),e)),l=Z(l,[["exit",f,e],t[i-2],t[i-1],["exit",s,e]]),l=Z(l,t.slice(i+1)),l=Z(l,[["exit",c,e]]),at(t,a,t.length,l),t}function tu(t,e,n){const r=this;let u=r.events.length,a,i;for(;u--;)if((r.events[u][1].type==="labelImage"||r.events[u][1].type==="labelLink")&&!r.events[u][1]._balanced){a=r.events[u][1];break}return l;function l(g){return a?a._inactive?o(g):(i=r.parser.defined.includes(wt(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),c):n(g)}function c(g){return g===40?t.attempt(Gi,f,i?f:o)(g):g===91?t.attempt(Zi,f,i?s:o)(g):i?f(g):o(g)}function s(g){return t.attempt(Ki,f,o)(g)}function f(g){return e(g)}function o(g){return a._balanced=!0,n(g)}}function nu(t,e,n){return r;function r(o){return t.enter("resource"),t.enter("resourceMarker"),t.consume(o),t.exit("resourceMarker"),u}function u(o){return j(o)?Lt(t,a)(o):a(o)}function a(o){return o===41?f(o):se(t,i,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(o)}function i(o){return j(o)?Lt(t,c)(o):f(o)}function l(o){return n(o)}function c(o){return o===34||o===39||o===40?he(t,s,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(o):f(o)}function s(o){return j(o)?Lt(t,f)(o):f(o)}function f(o){return o===41?(t.enter("resourceMarker"),t.consume(o),t.exit("resourceMarker"),t.exit("resource"),e):n(o)}}function eu(t,e,n){const r=this;return u;function u(l){return ce.call(r,t,a,i,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(wt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function i(l){return n(l)}}function ru(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),u}function u(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const iu={name:"labelStartImage",resolveAll:xn.resolveAll,tokenize:uu};function uu(t,e,n){const r=this;return u;function u(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),a}function a(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),i):n(l)}function i(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const au={name:"labelStartLink",resolveAll:xn.resolveAll,tokenize:lu};function lu(t,e,n){const r=this;return u;function u(i){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(i),t.exit("labelMarker"),t.exit("labelLink"),a}function a(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):e(i)}}const en={name:"lineEnding",tokenize:ou};function ou(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),q(t,e,"linePrefix")}}const Vt={name:"thematicBreak",tokenize:su};function su(t,e,n){let r=0,u;return a;function a(s){return t.enter("thematicBreak"),i(s)}function i(s){return u=s,l(s)}function l(s){return s===u?(t.enter("thematicBreakSequence"),c(s)):r>=3&&(s===null||F(s))?(t.exit("thematicBreak"),e(s)):n(s)}function c(s){return s===u?(t.consume(s),r++,c):(t.exit("thematicBreakSequence"),R(s)?q(t,l,"whitespace")(s):l(s))}}const et={continuation:{tokenize:mu},exit:gu,name:"list",tokenize:fu},cu={partial:!0,tokenize:xu},hu={partial:!0,tokenize:pu};function fu(t,e,n){const r=this,u=r.events[r.events.length-1];let a=u&&u[1].type==="linePrefix"?u[2].sliceSerialize(u[1],!0).length:0,i=0;return l;function l(h){const x=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:sn(h)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),h===42||h===45?t.check(Vt,n,s)(h):s(h);if(!r.interrupt||h===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(h)}return n(h)}function c(h){return sn(h)&&++i<10?(t.consume(h),c):(!r.interrupt||i<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(t.exit("listItemValue"),s(h)):n(h)}function s(h){return t.enter("listItemMarker"),t.consume(h),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,t.check(Bt,r.interrupt?n:f,t.attempt(cu,g,o))}function f(h){return r.containerState.initialBlankLine=!0,a++,g(h)}function o(h){return R(h)?(t.enter("listItemPrefixWhitespace"),t.consume(h),t.exit("listItemPrefixWhitespace"),g):n(h)}function g(h){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(h)}}function mu(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Bt,u,a);function u(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,q(t,e,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!R(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(hu,e,i)(l))}function i(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,q(t,t.attempt(et,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function pu(t,e,n){const r=this;return q(t,u,"listItemIndent",r.containerState.size+1);function u(a){const i=r.events[r.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?e(a):n(a)}}function gu(t){t.exit(this.containerState.type)}function xu(t,e,n){const r=this;return q(t,u,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function u(a){const i=r.events[r.events.length-1];return!R(a)&&i&&i[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const qn={name:"setextUnderline",resolveTo:du,tokenize:bu};function du(t,e){let n=t.length,r,u,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(u=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const i={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[u][1].type="setextHeadingText",a?(t.splice(u,0,["enter",i,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=i,t.push(["exit",i,e]),t}function bu(t,e,n){const r=this;let u;return a;function a(s){let f=r.events.length,o;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){o=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(t.enter("setextHeadingLine"),u=s,i(s)):n(s)}function i(s){return t.enter("setextHeadingLineSequence"),l(s)}function l(s){return s===u?(t.consume(s),l):(t.exit("setextHeadingLineSequence"),R(s)?q(t,c,"lineSuffix")(s):c(s))}function c(s){return s===null||F(s)?(t.exit("setextHeadingLine"),e(s)):n(s)}}const ku={tokenize:wu};function wu(t){const e=this,n=t.attempt(Bt,r,t.attempt(this.parser.constructs.flowInitial,u,q(t,t.attempt(this.parser.constructs.flow,u,t.attempt(Ci,u)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function u(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const yu={resolveAll:me()},Su=fe("string"),_u=fe("text");function fe(t){return{resolveAll:me(t==="text"?Iu:void 0),tokenize:e};function e(n){const r=this,u=this.parser.constructs[t],a=n.attempt(u,i,l);return i;function i(f){return s(f)?a(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return s(f)?(n.exit("data"),a(f)):(n.consume(f),c)}function s(f){if(f===null)return!0;const o=u[f];let g=-1;if(o)for(;++g<o.length;){const h=o[g];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function me(t){return e;function e(n,r){let u=-1,a;for(;++u<=n.length;)a===void 0?n[u]&&n[u][1].type==="data"&&(a=u,u++):(!n[u]||n[u][1].type!=="data")&&(u!==a+2&&(n[a][1].end=n[u-1][1].end,n.splice(a+2,u-a-2),u=a+2),a=void 0);return t?t(n,r):n}}function Iu(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],u=e.sliceStream(r);let a=u.length,i=-1,l=0,c;for(;a--;){const s=u[a];if(typeof s=="string"){for(i=s.length;s.charCodeAt(i-1)===32;)l++,i--;if(i)break;i=-1}else if(s===-2)c=!0,l++;else if(s!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const s={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?i:r.start._bufferIndex+i,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...s.start},r.start.offset===r.end.offset?Object.assign(r,s):(t.splice(n,0,["enter",s,e],["exit",s,e]),n+=2)}n++}return t}const Cu={42:et,43:et,45:et,48:et,49:et,50:et,51:et,52:et,53:et,54:et,55:et,56:et,57:et,62:ue},vu={91:Ai},zu={[-2]:nn,[-1]:nn,32:nn},Eu={35:Mi,42:Vt,45:[qn,Vt],60:qi,61:qn,95:Vt,96:Rn,126:Rn},Fu={38:le,92:ae},Au={[-5]:en,[-4]:en,[-3]:en,33:iu,38:le,42:cn,60:[ai,Qi],91:au,92:[Pi,ae],93:xn,95:cn,96:ki},Tu={null:[cn,yu]},Du={null:[42,95]},Lu={null:[]},Pu=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Du,contentInitial:vu,disable:Lu,document:Cu,flow:Eu,flowInitial:zu,insideSpan:Tu,string:Fu,text:Au},Symbol.toStringTag,{value:"Module"}));function Ou(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const u={},a=[];let i=[],l=[];const c={attempt:A(z),check:A(b),consume:y,enter:w,exit:D,interrupt:A(b,{interrupt:!0})},s={code:null,containerState:{},defineSkip:S,events:[],now:x,parser:t,previous:null,sliceSerialize:g,sliceStream:h,write:o};let f=e.tokenize.call(s,c);return e.resolveAll&&a.push(e),s;function o(C){return i=Z(i,C),v(),i[i.length-1]!==null?[]:(T(e,0),s.events=Xt(a,s.events,s),s.events)}function g(C,I){return Bu(h(C),I)}function h(C){return Mu(i,C)}function x(){const{_bufferIndex:C,_index:I,line:M,column:H,offset:L}=r;return{_bufferIndex:C,_index:I,line:M,column:H,offset:L}}function S(C){u[C.line]=C.column,d()}function v(){let C;for(;r._index<i.length;){const I=i[r._index];if(typeof I=="string")for(C=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===C&&r._bufferIndex<I.length;)k(I.charCodeAt(r._bufferIndex));else k(I)}}function k(C){f=f(C)}function y(C){F(C)?(r.line++,r.column=1,r.offset+=C===-3?2:1,d()):C!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++)),s.previous=C}function w(C,I){const M=I||{};return M.type=C,M.start=x(),s.events.push(["enter",M,s]),l.push(M),M}function D(C){const I=l.pop();return I.end=x(),s.events.push(["exit",I,s]),I}function z(C,I){T(C,I.from)}function b(C,I){I.restore()}function A(C,I){return M;function M(H,L,W){let Q,rt,it,m;return Array.isArray(H)?ut(H):"tokenize"in H?ut([H]):J(H);function J(Y){return bt;function bt(st){const mt=st!==null&&Y[st],pt=st!==null&&Y.null,St=[...Array.isArray(mt)?mt:mt?[mt]:[],...Array.isArray(pt)?pt:pt?[pt]:[]];return ut(St)(st)}}function ut(Y){return Q=Y,rt=0,Y.length===0?W:p(Y[rt])}function p(Y){return bt;function bt(st){return m=O(),it=Y,Y.partial||(s.currentConstruct=Y),Y.name&&s.parser.constructs.disable.null.includes(Y.name)?ot():Y.tokenize.call(I?Object.assign(Object.create(s),I):s,c,nt,ot)(st)}}function nt(Y){return C(it,m),L}function ot(Y){return m.restore(),++rt<Q.length?p(Q[rt]):W}}}function T(C,I){C.resolveAll&&!a.includes(C)&&a.push(C),C.resolve&&at(s.events,I,s.events.length-I,C.resolve(s.events.slice(I),s)),C.resolveTo&&(s.events=C.resolveTo(s.events,s))}function O(){const C=x(),I=s.previous,M=s.currentConstruct,H=s.events.length,L=Array.from(l);return{from:H,restore:W};function W(){r=C,s.previous=I,s.currentConstruct=M,s.events.length=H,l=L,d()}}function d(){r.line in u&&r.column<2&&(r.column=u[r.line],r.offset+=u[r.line]-1)}}function Mu(t,e){const n=e.start._index,r=e.start._bufferIndex,u=e.end._index,a=e.end._bufferIndex;let i;if(n===u)i=[t[n].slice(r,a)];else{if(i=t.slice(n,u),r>-1){const l=i[0];typeof l=="string"?i[0]=l.slice(r):i.shift()}a>0&&i.push(t[u].slice(0,a))}return i}function Bu(t,e){let n=-1;const r=[];let u;for(;++n<t.length;){const a=t[n];let i;if(typeof a=="string")i=a;else switch(a){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=e?" ":"	";break}case-1:{if(!e&&u)continue;i=" ";break}default:i=String.fromCharCode(a)}u=a===-2,r.push(i)}return r.join("")}function Ru(t){const r={constructs:re([Pu,...(t||{}).extensions||[]]),content:u(Jr),defined:[],document:u(ni),flow:u(ku),lazy:{},string:u(Su),text:u(_u)};return r;function u(a){return i;function i(l){return Ou(r,a,l)}}}function Nu(t){for(;!oe(t););return t}const Hn=/[\0\t\n\r]/g;function qu(){let t=1,e="",n=!0,r;return u;function u(a,i,l){const c=[];let s,f,o,g,h;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(i||void 0).decode(a)),o=0,e="",n&&(a.charCodeAt(0)===65279&&o++,n=void 0);o<a.length;){if(Hn.lastIndex=o,s=Hn.exec(a),g=s&&s.index!==void 0?s.index:a.length,h=a.charCodeAt(g),!s){e=a.slice(o);break}if(h===10&&o===g&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),o<g&&(c.push(a.slice(o,g)),t+=g-o),h){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}o=g+1}return l&&(r&&c.push(-5),e&&c.push(e),c.push(null)),c}}function Hu(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Xr(n)(Nu(Ru(n).document().write(qu()(t,e,!0))))}const ju={tokenize:Yu,partial:!0},pe={tokenize:Gu,partial:!0},ge={tokenize:Zu,partial:!0},xe={tokenize:Ku,partial:!0},Vu={tokenize:Xu,partial:!0},de={name:"wwwAutolink",tokenize:Wu,previous:ke},be={name:"protocolAutolink",tokenize:Qu,previous:we},dt={name:"emailAutolink",tokenize:Uu,previous:ye},ft={};function $u(){return{text:ft}}let _t=48;for(;_t<123;)ft[_t]=dt,_t++,_t===58?_t=65:_t===91&&(_t=97);ft[43]=dt;ft[45]=dt;ft[46]=dt;ft[95]=dt;ft[72]=[dt,be];ft[104]=[dt,be];ft[87]=[dt,de];ft[119]=[dt,de];function Uu(t,e,n){const r=this;let u,a;return i;function i(o){return!hn(o)||!ye.call(r,r.previous)||dn(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(o))}function l(o){return hn(o)?(t.consume(o),l):o===64?(t.consume(o),c):n(o)}function c(o){return o===46?t.check(Vu,f,s)(o):o===45||o===95||K(o)?(a=!0,t.consume(o),c):f(o)}function s(o){return t.consume(o),u=!0,c}function f(o){return a&&u&&tt(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(o)):n(o)}}function Wu(t,e,n){const r=this;return u;function u(i){return i!==87&&i!==119||!ke.call(r,r.previous)||dn(r.events)?n(i):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(ju,t.attempt(pe,t.attempt(ge,a),n),n)(i))}function a(i){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(i)}}function Qu(t,e,n){const r=this;let u="",a=!1;return i;function i(o){return(o===72||o===104)&&we.call(r,r.previous)&&!dn(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),u+=String.fromCodePoint(o),t.consume(o),l):n(o)}function l(o){if(tt(o)&&u.length<5)return u+=String.fromCodePoint(o),t.consume(o),l;if(o===58){const g=u.toLowerCase();if(g==="http"||g==="https")return t.consume(o),c}return n(o)}function c(o){return o===47?(t.consume(o),a?s:(a=!0,c)):n(o)}function s(o){return o===null||Gt(o)||j(o)||At(o)||gn(o)?n(o):t.attempt(pe,t.attempt(ge,f),n)(o)}function f(o){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(o)}}function Yu(t,e,n){let r=0;return u;function u(i){return(i===87||i===119)&&r<3?(r++,t.consume(i),u):i===46&&r===3?(t.consume(i),a):n(i)}function a(i){return i===null?n(i):e(i)}}function Gu(t,e,n){let r,u,a;return i;function i(s){return s===46||s===95?t.check(xe,c,l)(s):s===null||j(s)||At(s)||s!==45&&gn(s)?c(s):(a=!0,t.consume(s),i)}function l(s){return s===95?r=!0:(u=r,r=void 0),t.consume(s),i}function c(s){return u||r||!a?n(s):e(s)}}function Zu(t,e){let n=0,r=0;return u;function u(i){return i===40?(n++,t.consume(i),u):i===41&&r<n?a(i):i===33||i===34||i===38||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===60||i===63||i===93||i===95||i===126?t.check(xe,e,a)(i):i===null||j(i)||At(i)?e(i):(t.consume(i),u)}function a(i){return i===41&&r++,t.consume(i),u}}function Ku(t,e,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),r):l===38?(t.consume(l),a):l===93?(t.consume(l),u):l===60||l===null||j(l)||At(l)?e(l):n(l)}function u(l){return l===null||l===40||l===91||j(l)||At(l)?e(l):r(l)}function a(l){return tt(l)?i(l):n(l)}function i(l){return l===59?(t.consume(l),r):tt(l)?(t.consume(l),i):n(l)}}function Xu(t,e,n){return r;function r(a){return t.consume(a),u}function u(a){return K(a)?n(a):e(a)}}function ke(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||j(t)}function we(t){return!tt(t)}function ye(t){return!(t===47||hn(t))}function hn(t){return t===43||t===45||t===46||t===95||K(t)}function dn(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Ju={tokenize:la,partial:!0};function ta(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:ia,continuation:{tokenize:ua},exit:aa}},text:{91:{name:"gfmFootnoteCall",tokenize:ra},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:na,resolveTo:ea}}}}function na(t,e,n){const r=this;let u=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;u--;){const c=r.events[u][1];if(c.type==="labelImage"){i=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!i||!i._balanced)return n(c);const s=wt(r.sliceSerialize({start:i.end,end:r.now()}));return s.codePointAt(0)!==94||!a.includes(s.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function ea(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},u={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};u.end.column++,u.end.offset++,u.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},u.end),end:Object.assign({},t[t.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",u,e],["exit",u,e],["enter",a,e],["enter",i,e],["exit",i,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...l),t}function ra(t,e,n){const r=this,u=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,i;return l;function l(o){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(o),t.exit("gfmFootnoteCallLabelMarker"),c}function c(o){return o!==94?n(o):(t.enter("gfmFootnoteCallMarker"),t.consume(o),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",s)}function s(o){if(a>999||o===93&&!i||o===null||o===91||j(o))return n(o);if(o===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return u.includes(wt(r.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(o),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(o)}return j(o)||(i=!0),a++,t.consume(o),o===92?f:s}function f(o){return o===91||o===92||o===93?(t.consume(o),a++,s):s(o)}}function ia(t,e,n){const r=this,u=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,i=0,l;return c;function c(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),s}function s(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(x)}function f(x){if(i>999||x===93&&!l||x===null||x===91||j(x))return n(x);if(x===93){t.exit("chunkString");const S=t.exit("gfmFootnoteDefinitionLabelString");return a=wt(r.sliceSerialize(S)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return j(x)||(l=!0),i++,t.consume(x),x===92?o:f}function o(x){return x===91||x===92||x===93?(t.consume(x),i++,f):f(x)}function g(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),u.includes(a)||u.push(a),q(t,h,"gfmFootnoteDefinitionWhitespace")):n(x)}function h(x){return e(x)}}function ua(t,e,n){return t.check(Bt,e,t.attempt(Ju,e,n))}function aa(t){t.exit("gfmFootnoteDefinition")}function la(t,e,n){const r=this;return q(t,u,"gfmFootnoteDefinitionIndent",5);function u(a){const i=r.events[r.events.length-1];return i&&i[1].type==="gfmFootnoteDefinitionIndent"&&i[2].sliceSerialize(i[1],!0).length===4?e(a):n(a)}}function oa(t){let n={}.singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:u};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function u(i,l){let c=-1;for(;++c<i.length;)if(i[c][0]==="enter"&&i[c][1].type==="strikethroughSequenceTemporary"&&i[c][1]._close){let s=c;for(;s--;)if(i[s][0]==="exit"&&i[s][1].type==="strikethroughSequenceTemporary"&&i[s][1]._open&&i[c][1].end.offset-i[c][1].start.offset===i[s][1].end.offset-i[s][1].start.offset){i[c][1].type="strikethroughSequence",i[s][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},i[s][1].start),end:Object.assign({},i[c][1].end)},o={type:"strikethroughText",start:Object.assign({},i[s][1].end),end:Object.assign({},i[c][1].start)},g=[["enter",f,l],["enter",i[s][1],l],["exit",i[s][1],l],["enter",o,l]],h=l.parser.constructs.insideSpan.null;h&&at(g,g.length,0,Xt(h,i.slice(s+1,c),l)),at(g,g.length,0,[["exit",o,l],["enter",i[c][1],l],["exit",i[c][1],l],["exit",f,l]]),at(i,s-1,c-s+3,g),c=s+g.length-2;break}}for(c=-1;++c<i.length;)i[c][1].type==="strikethroughSequenceTemporary"&&(i[c][1].type="data");return i}function a(i,l,c){const s=this.previous,f=this.events;let o=0;return g;function g(x){return s===126&&f[f.length-1][1].type!=="characterEscape"?c(x):(i.enter("strikethroughSequenceTemporary"),h(x))}function h(x){const S=Zt(s);if(x===126)return o>1?c(x):(i.consume(x),o++,h);if(o<2&&!n)return c(x);const v=i.exit("strikethroughSequenceTemporary"),k=Zt(x);return v._open=!k||k===2&&!!S,v._close=!S||S===2&&!!k,l(x)}}}const rn={none:"",left:' align="left"',right:' align="right"',center:' align="center"'};function sa(){return{enter:{table(t){const e=t._align;this.lineEndingIfNeeded(),this.tag("<table>"),this.setData("tableAlign",e)},tableBody(){this.tag("<tbody>")},tableData(){const t=this.getData("tableAlign"),e=this.getData("tableColumn"),n=rn[t[e]];n===void 0?this.buffer():(this.lineEndingIfNeeded(),this.tag("<td"+n+">"))},tableHead(){this.lineEndingIfNeeded(),this.tag("<thead>")},tableHeader(){const t=this.getData("tableAlign"),e=this.getData("tableColumn"),n=rn[t[e]];this.lineEndingIfNeeded(),this.tag("<th"+n+">")},tableRow(){this.setData("tableColumn",0),this.lineEndingIfNeeded(),this.tag("<tr>")}},exit:{codeTextData(t){let e=this.sliceSerialize(t);this.getData("tableAlign")&&(e=e.replace(/\\([\\|])/g,ca)),this.raw(this.encode(e))},table(){this.setData("tableAlign"),this.setData("slurpAllLineEndings"),this.lineEndingIfNeeded(),this.tag("</table>")},tableBody(){this.lineEndingIfNeeded(),this.tag("</tbody>")},tableData(){const t=this.getData("tableAlign"),e=this.getData("tableColumn");e in t?(this.tag("</td>"),this.setData("tableColumn",e+1)):this.resume()},tableHead(){this.lineEndingIfNeeded(),this.tag("</thead>")},tableHeader(){const t=this.getData("tableColumn");this.tag("</th>"),this.setData("tableColumn",t+1)},tableRow(){const t=this.getData("tableAlign");let e=this.getData("tableColumn");for(;e<t.length;)this.lineEndingIfNeeded(),this.tag("<td"+rn[t[e]]+"></td>"),e++;this.setData("tableColumn",e),this.lineEndingIfNeeded(),this.tag("</tr>")}}}}function ca(t,e){return e==="|"?e:t}class ha{constructor(){this.map=[]}add(e,n,r){fa(this,e,n,r)}consume(e){if(this.map.sort(function(a,i){return a[0]-i[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let u=r.pop();for(;u;){for(const a of u)e.push(a);u=r.pop()}this.map.length=0}}function fa(t,e,n,r){let u=0;if(!(n===0&&r.length===0)){for(;u<t.map.length;){if(t.map[u][0]===e){t.map[u][1]+=n,t.map[u][2].push(...r);return}u+=1}t.map.push([e,n,r])}}function ma(t,e){let n=!1;const r=[];for(;e<t.length;){const u=t[e];if(n){if(u[0]==="enter")u[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(u[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(u[1].type==="tableDelimiterRow")break}else u[0]==="enter"&&u[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function Se(){return{flow:{null:{name:"table",tokenize:pa,resolveAll:ga}}}}function pa(t,e,n){const r=this;let u=0,a=0,i;return l;function l(d){let C=r.events.length-1;for(;C>-1;){const H=r.events[C][1].type;if(H==="lineEnding"||H==="linePrefix")C--;else break}const I=C>-1?r.events[C][1].type:null,M=I==="tableHead"||I==="tableRow"?b:c;return M===b&&r.parser.lazy[r.now().line]?n(d):M(d)}function c(d){return t.enter("tableHead"),t.enter("tableRow"),s(d)}function s(d){return d===124||(i=!0,a+=1),f(d)}function f(d){return d===null?n(d):F(d)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),h):n(d):R(d)?q(t,f,"whitespace")(d):(a+=1,i&&(i=!1,u+=1),d===124?(t.enter("tableCellDivider"),t.consume(d),t.exit("tableCellDivider"),i=!0,f):(t.enter("data"),o(d)))}function o(d){return d===null||d===124||j(d)?(t.exit("data"),f(d)):(t.consume(d),d===92?g:o)}function g(d){return d===92||d===124?(t.consume(d),o):o(d)}function h(d){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(d):(t.enter("tableDelimiterRow"),i=!1,R(d)?q(t,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d):x(d))}function x(d){return d===45||d===58?v(d):d===124?(i=!0,t.enter("tableCellDivider"),t.consume(d),t.exit("tableCellDivider"),S):z(d)}function S(d){return R(d)?q(t,v,"whitespace")(d):v(d)}function v(d){return d===58?(a+=1,i=!0,t.enter("tableDelimiterMarker"),t.consume(d),t.exit("tableDelimiterMarker"),k):d===45?(a+=1,k(d)):d===null||F(d)?D(d):z(d)}function k(d){return d===45?(t.enter("tableDelimiterFiller"),y(d)):z(d)}function y(d){return d===45?(t.consume(d),y):d===58?(i=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(d),t.exit("tableDelimiterMarker"),w):(t.exit("tableDelimiterFiller"),w(d))}function w(d){return R(d)?q(t,D,"whitespace")(d):D(d)}function D(d){return d===124?x(d):d===null||F(d)?!i||u!==a?z(d):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(d)):z(d)}function z(d){return n(d)}function b(d){return t.enter("tableRow"),A(d)}function A(d){return d===124?(t.enter("tableCellDivider"),t.consume(d),t.exit("tableCellDivider"),A):d===null||F(d)?(t.exit("tableRow"),e(d)):R(d)?q(t,A,"whitespace")(d):(t.enter("data"),T(d))}function T(d){return d===null||d===124||j(d)?(t.exit("data"),A(d)):(t.consume(d),d===92?O:T)}function O(d){return d===92||d===124?(t.consume(d),T):T(d)}}function ga(t,e){let n=-1,r=!0,u=0,a=[0,0,0,0],i=[0,0,0,0],l=!1,c=0,s,f,o;const g=new ha;for(;++n<t.length;){const h=t[n],x=h[1];h[0]==="enter"?x.type==="tableHead"?(l=!1,c!==0&&(jn(g,e,c,s,f),f=void 0,c=0),s={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",s,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,o=void 0,a=[0,0,0,0],i=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",f,e]])),u=x.type==="tableDelimiterRow"?2:f?3:1):u&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,i[2]===0&&(a[1]!==0&&(i[0]=i[1],o=Ht(g,e,a,u,void 0,o),a=[0,0,0,0]),i[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(i[0]=i[1],o=Ht(g,e,a,u,void 0,o)),a=i,i=[a[1],n,0,0])):x.type==="tableHead"?(l=!0,c=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(c=n,a[1]!==0?(i[0]=i[1],o=Ht(g,e,a,u,n,o)):i[1]!==0&&(o=Ht(g,e,i,u,n,o)),u=0):u&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(i[3]=n)}for(c!==0&&jn(g,e,c,s,f),g.consume(e.events),n=-1;++n<e.events.length;){const h=e.events[n];h[0]==="enter"&&h[1].type==="table"&&(h[1]._align=ma(e.events,n))}return t}function Ht(t,e,n,r,u,a){const i=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(a.end=Object.assign({},zt(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const c=zt(e.events,n[1]);if(a={type:i,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const s=zt(e.events,n[2]),f=zt(e.events,n[3]),o={type:l,start:Object.assign({},s),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",o,e]]),r!==2){const g=e.events[n[2]],h=e.events[n[3]];if(g[1].end=Object.assign({},h[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,S=n[3]-n[2]-1;t.add(x,S,[])}}t.add(n[3]+1,0,[["exit",o,e]])}return u!==void 0&&(a.end=Object.assign({},zt(e.events,u)),t.add(u,0,[["exit",a,e]]),a=void 0),a}function jn(t,e,n,r,u){const a=[],i=zt(e.events,n);u&&(u.end=Object.assign({},i),a.push(["exit",u,e])),r.end=Object.assign({},i),a.push(["exit",r,e]),t.add(n+1,0,a)}function zt(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const xa={name:"tasklistCheck",tokenize:ba};function da(){return{text:{91:xa}}}function ba(t,e,n){const r=this;return u;function u(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),a)}function a(c){return j(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),i):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),i):n(c)}function i(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return F(c)?e(c):R(c)?t.check({tokenize:ka},e,n)(c):n(c)}}function ka(t,e,n){return q(t,r,"whitespace");function r(u){return u===null?n(u):e(u)}}function wa(t){return re([$u(),ta(),oa(),Se(),da()])}var ya=X('<div class="markdown-content"><!></div>');function Sa(t,e){Ot(e,!0);var n=ya(),r=N(n);Dr(r,()=>Hu(e.content,{extensions:[wa(),Se()],htmlExtensions:[sa()]})),B(n),U(t,n),Mt()}const _a=t=>t;function Ia(t){const e=t-1;return e*e*e+1}function Vn(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function fn(t,{delay:e=0,duration:n=400,easing:r=_a}={}){const u=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:a=>`opacity: ${a*u}`}}function Ca(t,{delay:e=0,duration:n=400,easing:r=Ia,x:u=0,y:a=0,opacity:i=0}={}){const l=getComputedStyle(t),c=+l.opacity,s=l.transform==="none"?"":l.transform,f=c*(1-i),[o,g]=Vn(u),[h,x]=Vn(a);return{delay:e,duration:n,easing:r,css:(S,v)=>`
			transform: ${s} translate(${(1-S)*o}${g}, ${(1-S)*h}${x});
			opacity: ${c-f*v}`}}var va=X('<div><p><span class="truncate"> </span> <span class="flex-shrink-0 text-xs"> </span></p> <div class="overflow-x-scroll"><!></div></div>'),za=X('<div class="flex items-center justify-center h-full text-center text-gray-500"><p>Send a message to get started</p></div>'),Ea=X('<div class="flex-1 overflow-y-scroll space-y-2 md:space-y-4 bg-white rounded-lg shadow-md p-2 md:p-4"><!> <!></div>');function Fa(t,e){Ot(e,!0);const n=Gn(e,"animate",3,!1),r=Qt(()=>$.current.query.messages.where("chatId",e.chatId).related("chunks").related("user"));let u=Kt(null);_r(()=>{var f;r.current.length&&((f=P(u))==null||f.scrollTo({top:P(u).scrollHeight,behavior:n()?"smooth":"instant"}))});function a(f){return f.userId===$.current.userID?"bg-blue-500 text-white ml-auto self-end":f.role==="assistant"?"bg-orange-500 text-white mr-auto self-start":"bg-gray-200 text-gray-800 mr-auto self-start"}var i=Ea(),l=N(i);mn(l,17,()=>r.current,f=>f.id,(f,o)=>{var g=va();const h=It(()=>P(o).userId===$.current.userID);var x=N(g),S=N(x),v=N(S,!0);B(S);var k=V(S,2),y=N(k,!0);B(k),B(x);var w=V(x,2),D=N(w);const z=It(()=>P(o).chunks.map(b=>b.content).join(""));Sa(D,{get content(){return P(z)}}),B(w),B(g),Ct((b,A)=>{var T;Fn(g,1,`rounded-lg p-3 md:p-4 shadow-md transition-all duration-300 overflow-hidden ${b??""} max-w-[80%]`),Fn(x,1,`flex font-bold capitalize mb-2 md:mb-4 items-center justify-between border-b ${(P(o).role==="user"&&!P(h)?"border-gray-500":"border-white")??""} pb-2 gap-2`),vt(v,P(o).role==="user"?(T=P(o).user)==null?void 0:T.name:"Assistant"),vt(y,A)},[()=>a(P(o)),()=>new Date(P(o).createdAt).toLocaleString([],{dateStyle:"short",timeStyle:"short"})]),Yt(1,g,()=>Ca,()=>({duration:n()?100:0})),U(f,g)});var c=V(l,2);{var s=f=>{var o=za();Yt(1,o,()=>fn,()=>({duration:100})),U(f,o)};Et(c,f=>{r.current.length||f(s)})}B(i),pn(i,f=>Ft(u,f),()=>P(u)),U(t,i),Mt()}const $n=(t,e=kt,n=kt,r=kt)=>{var u=Ta(),a=N(u),i=N(a,!0);B(a);var l=V(a,2);Zn(l),l.__change=function(...c){var s;(s=r())==null||s.apply(this,c)},Yn(2),B(u),Ct(()=>{vt(i,e()[n()?0:1]),Fr(l,n())}),U(t,u)};async function Aa(t,e,n){var u;if(!P(e))return;const r=$.current.query.users.where("username",P(e)).one().materialize();if(r.data)$.current.mutate.chat_access.insert({id:jt(),chatId:n.chatId,userId:(u=r.data)==null?void 0:u.id,write:!1});else{const a=await fetch(`https://ungh.cc/users/${P(e)}`);if(a.ok){const{user:i}=await a.json(),l=jt();$.current.mutateBatch(c=>{c.users.insert({id:l,githubId:i.id,name:i.name,username:i.username}),c.chat_access.insert({id:jt(),chatId:n.chatId,userId:l,write:!1})})}}Ft(e,"")}var Ta=X(`<label class="inline-flex items-center cursor-pointer"><span class="text-sm font-medium text-gray-700"> </span> <input type="checkbox" class="sr-only peer"> <div class="mx-2 relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-2 peer-focus:ring-[#FF3E00] peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#FF3E00]"></div></label>`),Da=X('<p class="text-sm text-gray-500 italic">No users have been added yet</p>'),La=(t,e,n)=>e(P(n).id),Pa=X('<li class="py-3 flex items-center justify-between"><div class="flex items-center"><div class="size-8 rounded-full overflow-hidden bg-gray-200 mr-3"><img class="h-full w-full object-cover"></div> <div><p class="font-medium"> </p> <p class="text-sm text-gray-500"> </p></div></div> <div class="flex items-center gap-2"><!> <button class="p-1 rounded text-red-500 hover:bg-red-50" aria-label="Remove user"><!></button></div></li>'),Oa=X('<ul class="divide-y divide-gray-200"></ul>'),Ma=(t,e)=>navigator.clipboard.writeText(`${Xn.url.origin}/chat/${e.chatId}`).then(()=>te("Link copied to clipboard")),Ba=X('<button class="ml-2 p-2 rounded-md flex items-center gap-2 bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" aria-label="Share chat"><!> <span class="hidden md:block">Share</span></button> <dialog class="max-h-full rounded-lg shadow-lg w-full max-w-xl p-4 md:mx-auto md:mt-[20vh] inset-0 m-0 h-full md:h-fit"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-bold">Share Chat</h2> <button class="text-gray-500 hover:text-gray-700" aria-label="Close"><!></button></div> <div class="mb-4"><label for="githubUsername" class="block text-sm font-medium text-gray-700 mb-1">Add user by github username</label> <div class="flex"><input id="githubUsername" type="text" placeholder="username" class="flex-1 rounded-l-md border border-gray-300 px-3 py-2 focus:border-[#FF3E00] focus:ring-[#FF3E00] focus:outline-none"> <button class="bg-[#FF3E00] text-white px-4 py-2 rounded-r-md hover:bg-[#FF5722] focus:outline-none focus:ring-2 focus:ring-[#FF3E00] focus:ring-offset-2">Add</button></div></div> <div class="mb-6"><h3 class="text-sm font-medium text-gray-700 mb-2">Currently shared with</h3> <!></div> <div class="flex items-center mb-3"><p class="text-sm font-medium text-gray-700 mr-auto">Public Access</p> <div class="flex items-center gap-2"><!> <button class="p-1 rounded text-gray-500 hover:bg-gray-50" aria-label="Copy link"><!></button></div></div></dialog>',1);function Ra(t,e){Ot(e,!0);const n=Qt(()=>$.current.query.chats.where("id",e.chatId).one()),r=Qt(()=>$.current.query.chat_access.where("chatId",e.chatId).related("user"));let u,a=Kt("");function i(I,M){$.current.mutate.chat_access.update({id:I,write:M})}function l(I){$.current.mutate.chat_access.delete({id:I})}var c=Ba(),s=Pt(c);s.__click=()=>u==null?void 0:u.showModal();var f=N(s);Ar(f,{size:20}),Yn(2),B(s);var o=V(s,2),g=N(o),h=V(N(g),2);h.__click=()=>u==null?void 0:u.close();var x=N(h);An(x,{}),B(h),B(g);var S=V(g,2),v=V(N(S),2),k=N(v);Zn(k);var y=V(k,2);y.__click=[Aa,a,e],B(v),B(S);var w=V(S,2),D=V(N(w),2);{var z=I=>{var M=Da();U(I,M)},b=I=>{var M=Oa();mn(M,21,()=>r.current,Kn,(H,L)=>{var W=$t(),Q=Pt(W);{var rt=it=>{var m=Pa(),J=N(m),ut=N(J),p=N(ut);B(ut);var nt=V(ut,2),ot=N(nt),Y=N(ot,!0);B(ot);var bt=V(ot,2),st=N(bt,!0);B(bt),B(nt),B(J);var mt=V(J,2),pt=N(mt);$n(pt,()=>["Write","Read"],()=>P(L).write,()=>Rt=>{i(P(L).id,Rt.currentTarget.checked)});var St=V(pt,2);St.__click=[La,l,L];var Jt=N(St);An(Jt,{size:20}),B(St),B(mt),B(m),Ct(()=>{Wt(p,"src",`https://github.com/${P(L).user.username}.png`),Wt(p,"alt",P(L).user.name||"User"),vt(Y,P(L).user.name||"Unknown User"),vt(st,P(L).user.username||"")}),U(it,m)};Et(Q,it=>{P(L).user&&it(rt)})}U(H,W)}),B(M),U(I,M)};Et(D,I=>{r.current.length===0?I(z):I(b,!1)})}B(w);var A=V(w,2),T=V(N(A),2),O=N(T);$n(O,()=>["Public","Private"],()=>{var I;return(I=n.current)==null?void 0:I.public},()=>I=>{$.current.mutate.chats.update({id:e.chatId,public:I.currentTarget.checked})});var d=V(O,2);d.__click=[Ma,e];var C=N(d);Br(C,{size:20}),B(d),B(T),B(A),B(o),pn(o,I=>u=I,()=>u),Jn(k,()=>P(a),I=>Ft(a,I)),U(t,c),Mt()}Un(["change","click"]);var Na=X('<h2 class="text-xl md:text-2xl font-bold truncate"> </h2>'),qa=X('<div class="inline-block size-8 rounded-full ring-2 ring-white overflow-hidden bg-gray-200"><img class="h-full w-full object-cover"></div>'),Ha=X('<div class="flex items-center justify-between"><!> <div class="flex items-center gap-2"><div class="hidden md:flex -space-x-2 overflow-hidden"></div> <!></div></div>'),ja=X("<h2>You don't have write access to this chat</h2>"),Va=X("<h2>You must be logged in to chat</h2>"),$a=X('<div class="flex flex-col h-[calc(100dvh-88px)] md:h-[calc(100dvh-112px)] space-y-2 md:space-y-6"><!> <!> <!></div>');function tl(t,e){Ot(e,!0);const n=It(()=>Xn.params.chatId);let r=Kt(!1);const u=Qt(()=>$.current.query.chats.where("id",P(n)).related("chatAccess",k=>k.related("user")).one());function a(k){try{u.current||$.current.mutate.chats.insert({id:P(n),title:"New Chat",userId:$.current.userID,public:!1,locked:!1,createdAt:Date.now(),updatedAt:Date.now()});const y=jt();$.current.mutateBatch(w=>{w.messages.insert({id:y,chatId:P(n),role:"user",createdAt:Date.now(),userId:$.current.userID}),w.message_chunks.insert({messageId:y,index:0,content:k})}),$.current.mutate.chats.update({id:P(n),locked:!0}),Ft(r,!0)}catch(y){console.error(y),te("Something went wrong while sending the message")}}const i={delay:50,duration:50},l={delay:0,duration:50},c=It(()=>$.current.userID!=="anon"),s=It(()=>u.current===void 0),f=It(()=>{var k,y;return((k=u.current)==null?void 0:k.chatAccess.some(w=>w.userId===$.current.userID))||$.current.userID===((y=u.current)==null?void 0:y.userId)});var o=$a();tr(k=>{Ct(()=>{var y;return Ir.title=`ZChat - ${((y=u.current)==null?void 0:y.title)??"New Chat"}`})});var g=N(o);tn(g,{children:(k,y)=>{var w=Ha(),D=N(w);Tr(D,()=>{var T;return(T=u.current)==null?void 0:T.title},T=>{var O=Na(),d=N(O,!0);B(O),Ct(()=>{var C;return vt(d,((C=u.current)==null?void 0:C.title)??"New Chat")}),Yt(1,O,()=>fn,()=>i),Yt(2,O,()=>fn,()=>l),U(T,O)});var z=V(D,2),b=N(z);mn(b,21,()=>{var T;return((T=u.current)==null?void 0:T.chatAccess)??[]},Kn,(T,O)=>{var d=$t(),C=Pt(d);{var I=M=>{var H=qa(),L=N(H);B(H),Ct(()=>{Wt(L,"src",`https://github.com/${P(O).user.username}.png`),Wt(L,"alt",P(O).user.name||"User")}),U(M,H)};Et(C,M=>{P(O).user&&M(I)})}U(T,d)}),B(b);var A=V(b,2);Ra(A,{get chatId(){return P(n)}}),B(z),B(w),U(k,w)}});var h=V(g,2);Fa(h,{get chatId(){return P(n)},get animate(){return P(r)}});var x=V(h,2);{var S=k=>{var y=$t(),w=Pt(y);{var D=b=>{const A=It(()=>{var T;return(T=u.current)==null?void 0:T.locked});qr(b,{submit:a,get locked(){return P(A)}})},z=b=>{tn(b,{children:(A,T)=>{var O=ja();U(A,O)}})};Et(w,b=>{P(f)||P(s)?b(D):b(z,!1)})}U(k,y)},v=k=>{tn(k,{children:(y,w)=>{var D=Va();U(y,D)}})};Et(x,k=>{P(c)?k(S):k(v,!1)})}B(o),U(t,o),Mt()}export{tl as component};
